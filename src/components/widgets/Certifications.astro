---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline,
  // { image: string, title: string, url?: string }
  certs = [],

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <Headline title={title} subtitle={subtitle} tagline={tagline} />

  <div class="flex flex-wrap justify-center -m-4 text-center">
    {
      certs.map(({ src, title, url }) => (
        <div class="p-4 md:w-1/4 sm:w-1/2 w-full min-w-[220px] text-center md:border-r md:last:border-none dark:md:border-slate-500 intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade intersect-quarter">
          {
            url ? (
              <a class="inline-block group" href={url} rel="noopener noreferrer">
                <div class="mx-auto mb-4 w-40 h-40 sm:w-36 sm:h-36 lg:w-40 lg:h-40 rounded-lg overflow-hidden">
                  <img
                    src={src}
                    alt={title ?? 'Image'}
                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                    width={256}
                    height={256}
                    sizes="(max-width: 900px) 128px, 256px"
                    loading="lazy"
                    decoding="async"
                  />
                </div>

                <div class="text-sm font-medium mt-2 uppercase tracking-widest text-gray-800 dark:text-slate-300 lg:text-base">
                  {title}
                </div>
              </a>
            ) : (
              <div>
                <div class="mx-auto mb-4 w-40 h-40 sm:w-36 sm:h-36 lg:w-40 lg:h-40 rounded-lg overflow-hidden">
                  <img
                    src={src}
                    alt={title ?? 'Image'}
                    class="w-full h-full object-cover"
                    width={600}
                    height={600}
                    sizes="(max-width: 900px) 300px, 600px"
                    loading="lazy"
                    decoding="async"
                  />
                </div>

                <div class="text-sm font-medium mt-2 uppercase tracking-widest text-gray-800 dark:text-slate-300 lg:text-base">
                  {title}
                </div>
              </div>
            )
          }
        </div>
      ))
    }
  </div>
</WidgetWrapper>
